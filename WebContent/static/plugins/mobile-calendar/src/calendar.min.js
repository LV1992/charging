!function(e){var t="undefined"!=typeof window?window:this;"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t):function(t){if(!t.document)throw new Error("document is a undefined");return e(t)}:e(t)}(function(e){function t(){var e=new Date;this.hours=!1,this.hoursPast=!1,this.focusObj=null,this.shield="[]",this.startDate="",this.startJSON={},this.fixDate={y:e.getFullYear(),m:e.getMonth()+1,d:0},this.init()}function a(e,t){function a(a){function n(e){var t=e.targetTouches?e.targetTouches[0]:e||event;return r=t.pageX-o,t.preventDefault&&t.preventDefault(),!1}function s(e){return this.onmousemove&&(this.onmousemove=null),this.onmouseup&&(this.onmouseup=null),this.removeEventListener("touchmove",n,!1),this.removeEventListener("touchend",s,!1),D?!1:void(Math.abs(r)>=c&&(D=!0,t&&t(l,r)))}var r,i=a.targetTouches?a.targetTouches[0]:a||event,o=i.pageX,c=parseInt(document.documentElement.clientWidth/5,10),l=this;this.onmousemove=n,this.onmouseup=s,e.addEventListener("touchmove",n,!1),e.addEventListener("touchend",s,!1)}e.onmousedown=a,e.addEventListener("touchstart",a,!1)}function n(e,t,a){if(t){var n=e.className.replace(/\s+/g," ");n=n.split(" "),t=t.replace("^s+|s+$").replace(/\s+/," ").split(" "),a=a||"add";for(var s=0;s<n.length;s++)switch(a){case"has":if(t[0]==n[s])return!0;break;case"add":case"remove":for(var r=0;r<t.length;r++)t[r]==n[s]&&n.splice(s,1)}"add"==a&&(n=n.concat(t)),e.className=n.join(" ")}}function s(e,t){var a;switch(t.charAt(0)){case"#":a=e.getElementById(t.substring(1));break;case".":a=e.getElementsByClassName(t.substring(1));break;default:a=e.getElementsByTagName(t)}return a}function r(e,t,a){if(e){t=t||{},a=a||"";var n=document.createElement(e);for(var s in t)n.setAttribute(s,t[s]);return n.innerHTML=a,n}}function i(){n(x,"close"),setTimeout(function(){n(x,"active close","remove")},290)}function o(e,t){if(!e)return!1;e=e.split("/"),t=t||"y/m/d";for(var a=t.charAt(0),n=0,s=0;s<t.length;s++)a.charAt(n)!=t.charAt(s)&&(a+=t.charAt(s),n++);var r={y:e[0],m:e[1],d:e[2]},i="",o="";/\//g.test(a)?i="/":/\-/g.test(a)&&(i="-"),a=a.split(i);for(var s=0;s<a.length;s++)o+=r[a[s]],s<a.length-1&&(o+=i);return o}function c(e,t){if(e=e.replace(/[\'\s]+/g,"")){e=e.match(/(\d+[\/\-]\d+[\/\-]\d+)/g);for(var a=[],n=0;n<e.length;n++){var s=e[n].match(/\d+/g),r={};3==s.length?(r.m=s[1],4==s[0].length?(r.y=s[0],r.d=s[2]):(r.d=s[0],r.y=s[2])):2==s.length&&(4==s[0].length?(r.y=s[0],r.m=s[1]):s[0].length<=2&&(r.m=s[0],r.d=s[1])),a.push(r)}return a}}function l(e,t,a){if(!e)return null;switch(arguments.length){case 3:e.setAttribute(t,a);break;case 2:return e.getAttribute(t)}}var h,d,u,p,v,f,m,y,g=0,w=0,D=!1,x=r("div",{"class":"calendar"}),b=r("div",{"class":"calendar-mask"}),C=r("div",{"class":"calendar-content"}),j=r("div",{"class":"calendar-list"});return t.prototype.init=function(){var e=this,t=s(document,".calendars");if(t.length){document.body.appendChild(x),x.appendChild(b),x.appendChild(C),calenTitle=s(C,".calendar-title"),this.createHeader(function(){e.createWeek(),C.appendChild(j),a(j,function(t,a){a>0?g--:g++,e.startJSON.prev.m=g-1,e.startJSON.now.m=g,e.startJSON.next.m=g+1,e.transitions(t,a)});for(var t=0;t<d.length;t++)d[t].onclick=function(){if(n(this,"calendar-month-txt","has")){n(y,"active",y.show?"remove":"add"),m.show&&(n(m,"active","remove"),m.show=!1);for(var e=0;e<u.length;e++)l(u[e],"data-value")==l(this,"data-value")?n(u[e],"active"):n(u[e],"active","remove");y.show=!y.show}else if(n(this,"calendar-year-txt","has")){n(m,"active",m.show?"remove":"add"),y.show&&(n(y,"active","remove"),y.show=!1);for(var e=0;e<p.length;e++)l(p[e],"data-value")==l(this,"data-value")?n(p[e],"active"):n(p[e],"active","remove");m.show=!m.show}}}),this.createDate({},function(t){for(var a=0;a<u.length;a++)t[a].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");g+=l(this,"data-value")-l(f,"data-value"),e.selectDate(this,y,"m",g)}});for(var r=0;r<t.length;r++)l(t[r],"readonly","true"),t[r].onfocus=function(){if(null==l(this,"disabled")){var t=Number(l(this,"start"))||1915,s=Number(l(this,"end"))||2020;h=!(null==l(this,"past")),e.hours=!(null==l(this,"hours")),e.hoursPast=!(null==l(this,"hours-past")),e.shield=c(l(this,"shield")||""),e.startDate=c(l(this,"start-date")||"");var r,i,o,d=new Date;if(e.startDate instanceof Array&&e.startDate.length){var u=e.startDate[0];w=u.y-d.getFullYear(),g=u.m-(d.getMonth()+1);for(var p in u)e.fixDate[p]=u[p];r={y:w,m:g-1,d:u.d},i={y:w,m:g,d:u.d},o={y:w,m:g+1,d:u.d},e.startJSON={prev:r,now:i,next:o}}else e.fixDate.y=d.getFullYear(),e.fixDate.m=d.getMonth()+1,e.fixDate.d=0;e.focusObj!=this&&((!e.startDate instanceof Array||!e.startDate)&&(g=0,w=0,e.startJSON.prev={y:w,m:g-1},e.startJSON.now={y:w,m:g},e.startJSON.next={y:w,m:g+1}),e.appendList(e.startJSON,function(){e.addEvent()}),e.createDate({start:t,end:s,type:"year"},function(t){for(var s=0;s<t.length;s++)t[s].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");w+=l(this,"data-value")-l(v,"data-value"),e.selectDate(this,m,"y",w)};a(m,function(e,t){m.index=m.index||0;var a=m.children.length;t>0?(m.index++,m.index>=0&&(m.index=0)):(m.index--,m.index<=-a&&(m.index=-(a-1)));var n="translateX("+m.index*(100/a)+"%)";m.style.WebkitTransform=n,m.style.transform=n,setTimeout(function(){D=!1},500)})})),n(x,"active"),e.focusObj=this}};C.onclick=function(e){var t=e.targetTouches?e.targetTouches[0]:e||event;t.cancelBubble=!0},b.onclick=i}},t.prototype.createCalenList=function(e,t){function a(t,a,n){if(!o.shield)return!1;for(var s=0;s<o.shield.length;s++)if(o.shield[s].y=o.shield[s].y||e.getFullYear(),o.shield[s].m=o.shield[s].m||e.getMonth()+1,o.shield[s].d=o.shield[s].d||e.getDate(),t==o.shield[s].y&&a==o.shield[s].m&&n==o.shield[s].d)return!0;return!1}var s=document.createElement("div"),i=0,o=this;e=e||{},e.m=e.m||0,e.y=e.y||0;var c=new Date,c=new Date,d=c.getDate();c.setFullYear(c.getFullYear()+e.y,c.getMonth()+e.m+1,1,0,0,0),c.setDate(0);var u=c.getDate();c.setDate(1);var p=c.getDay(),c=new Date;c.setFullYear(c.getFullYear()+e.y,c.getMonth()+e.m,1,0,0,0);var m=c.getMonth()+1,y=c.getFullYear();c.setDate(0);for(var g=c.getDate(),w=[],D=g;D>0;D--)w.push(D);t&&(v.innerHTML=y,f.innerHTML=10>m?"0"+m:m,l(v,"data-value",y),l(f,"data-value",m-1));var x=p+7;x=x>=10?x-7:x;for(var D=0;x>D;D++){var b=r("span"),C=r("a",{"data-calen":y+"/"+(m-1)+"/"+w[D],"class":"prev-m prev-to-month pasted",href:"javascript:;"},w[D]);(w[D]==d&&1==e.m&&!e.y&&!e.d||!e.y&&Number(o.fixDate.m)+1==m&&o.fixDate.d==w[D])&&n(C,"today"),a(y,m-1,w[D])&&n(C,"pasted shield"),b.appendChild(C),s.children.length?s.insertBefore(b,s.children[0]):s.appendChild(b),i++}for(var D=0;u>D;D++){i++;{var j=D+1,b=r("span"),C=r("a",{"data-calen":y+"/"+m+"/"+j,href:"javascript:;"},j);new Date}switch(i%7){case 0:case 1:C.className="weekend"}!e.m&&!e.y||!e.y&&o.fixDate.m==m?o.fixDate.d==j&&o.fixDate.m==m||!o.fixDate.d&&j==d?C.className=C.className+" today":(h||o.hoursPast)&&d>j&&(C.className=C.className+" expire pasted"):(h||o.hoursPast)&&e.m<0&&e.y<=0&&(C.className=" expire pasted"),(y<=o.fixDate.y&&m<=o.fixDate.m&&j<e.d||y<=o.fixDate.y&&m<o.fixDate.m)&&o.startDate&&n(C,"expire pasted"),a(y,m,j)&&n(C,"pasted shield"),b.appendChild(C),s.appendChild(b)}for(var O=42-s.children.length,D=0;O>D;D++){var j=D+1,b=r("span"),C=r("a",{"data-calen":y+"/"+(m+1)+"/"+j,"class":"next-m next-to-month",href:"javascript:;"},j);(j==d&&-1==e.m&&!e.y&&!e.d||!e.y&&o.fixDate.m-1==m&&o.fixDate.d==j)&&n(C,"today"),a(y,m+1,j)&&n(C,"pasted shield"),b.appendChild(C),s.appendChild(b)}return s},t.prototype.createDate=function(e,t){e=e||{},e.start=e.start||1,e.end=e.end||12,e.type=e.type||"month";for(var a=r("div",{"class":"month"==e.type?"calendar-months":"calendar-years"}),n=r("div"),s=[],i=0,o=0,c=0,l=(new Date).getFullYear(),h=e.start;h<=e.end;h++){var d=r("span"),v=r("a",{"data-value":"year"==e.type?h:h-1,href:"javascript:;"},10>h?"0"+h:h);s.push(v),"year"==e.type?(i>=12&&(a.appendChild(n),n=r("div"),i=0,o++),h==l&&(c=o),d.appendChild(v),n.appendChild(d)):(d.appendChild(v),a.appendChild(d)),i++}if("year"==e.type){m&&C&&C.removeChild(m),a.appendChild(n),m=a,p=s,i&&o++,a.style.width=100*o+"%";for(var h=0;o>h;h++)a.children[h].style.width=100/o+"%";a.style.WebkitTransform="translateX(-"+c*(100/o)+"%)",a.style.transform="translateX(-"+c*(100/o)+"%)",m.index=-c}else y&&C&&C.removeChild(y),y=a,u=s;C.appendChild(a),t&&t(s)},t.prototype.createTime=function(e,t,a,o){var c=s(C,".calendar-time"),h=[],d=new Date,u=d.getDate(),p=d.getHours(),v=this;if(c.length){c=c[0];for(var f=s(c,"a"),m=0;m<f.length;m++)h.push({obj:f[m],time:parseInt(l(f[m],"data-time"),10)})}else{c=r("div",{"class":"calendar-time"});for(var m=0;24>m;m++){var y=10>m?"0"+m:m;y+=":00";var D=r("span"),x=r("a",{href:"javascript:;","data-time":y},y);D.appendChild(x),c.appendChild(D),h.push({obj:x,time:parseInt(y,10)})}}n(c,"active");for(var m=0;m<h.length;m++)v.hoursPast&&(0>g&&0>=w||a==u&&h[m].time<=p||0>=g&&0>=w&&u>a)?(n(h[m].obj,"expire pasted"),h[m].obj.active=!1):(n(h[m].obj,"expire pasted","remove"),h[m].obj.active=!0),function(a){h[m].obj.onclick=function(){if(this.active){var s=t+" "+(10>a?"0"+a:a)+":00";null!=e.value?e.value=s:null!=e.innerHTML&&(e.innerHTML=s),i(),v.changes()}n(c,"active","remove")}}(h[m].time);C.appendChild(c)},t.prototype.createHeader=function(e){d=d||[];var t=this,a=r("div",{"class":"calendar-header"}),s=r("div",{"class":"calendar-year"}),i=r("a",{"class":"year-prev switch-btn",href:"javascript:;"},"&lt;"),o=r("a",{"class":"year-next switch-btn",href:"javascript:;"},"&gt;"),c=r("a",{"class":"calendar-year-txt calendar-title",href:"javascript:;"});s.appendChild(i),s.appendChild(c),s.appendChild(o);var l=r("div",{"class":"calendar-month"}),h=r("a",{"class":"month-prev switch-btn",href:"javascript:;"},"&lt;"),u=r("a",{"class":"month-next switch-btn",href:"javascript:;"},"&gt;"),p=r("a",{"class":"calendar-month-txt calendar-title",href:"javascript:;"});l.appendChild(h),l.appendChild(p),l.appendChild(u),a.appendChild(s),a.appendChild(l),d.push(c,p),f=p,v=c,h.onclick=function(){t.switchDate(-1)},u.onclick=function(){t.switchDate(1)},i.onclick=function(){t.switchDate(-1,"year")},o.onclick=function(){t.switchDate(1,"year")},C.children.length?C.insertBefore(a,C.children[0]):C.appendChild(a);for(var m=0;m<a.children.length;m++)a.children[m].ontouchstart=function(){n(this,"active")},a.children[m].ontouchend=function(){n(this,"active","remove")};e&&e()},t.prototype.createWeek=function(){for(var e=r("div",{"class":"calendar-week"}),t="日一二三四五六",a=0;7>a;a++){var n=a+1,s={};(n%7==1||n%7==0)&&(s["class"]="weekend"),e.appendChild(r("span",s,t.charAt(a)))}C.appendChild(e)},t.prototype.appendList=function(e,t){e=e||{},e.prev=e.prev||{m:g-1,y:w},e.now=e.now||{m:g,y:w},e.next=e.next||{m:g+1,y:w},j.innerHTML="",j.appendChild(this.createCalenList(e.prev)),j.appendChild(this.createCalenList(e.now,!0)),j.appendChild(this.createCalenList(e.next)),t&&t()},t.prototype.addEvent=function(){for(var e=this,t=j.getElementsByTagName("a"),a=0;a<t.length;a++)t[a].onclick=function(){if(n(this,"prev-to-month","has"))e.switchDate(-1);else if(n(this,"next-to-month","has"))e.switchDate(1);else if(!n(this,"pasted","has")&&!n(this,"shield","has")){var t=l(this,"data-calen"),a=this.innerHTML;if(t=o(t,l(e.focusObj,"format")||!1),e.hours)e.createTime(e.focusObj,t,a,h);else{if(e.focusObj&&"undefined"==typeof e.focusObj.value)e.focusObj.innerHTML=t;else if(e.focusObj){var s=typeof e.focusObj.value;("string"===s||"number"===s)&&e.focusObj.oldValue!=t&&(e.focusObj.value=t,e.focusObj.oldValue=t,e.changes())}i()}}}},t.prototype.switchDate=function(e,t){var a=this;switch(t=t||"month"){case"month":e>0?g++:g--,a.startJSON.prev.m=g-1,a.startJSON.now.m=g,a.startJSON.next.m=g+1,a.transitions(j,e>0?-1:1);break;case"year":a.appendList({prev:{m:g,y:w-1},next:{m:g,y:w+1}},function(){e>0?w++:w--,a.startJSON.prev.y=w,a.startJSON.now.y=w,a.startJSON.next.y=w,a.transitions(j,e>0?-1:1)})}},t.prototype.transitions=function(e,t){function a(){s.appendList(s.startJSON,function(){n(e,"silde prev-to next-to","remove"),s.addEvent(),D=!1})}var s=this;t>0?n(e,"silde prev-to"):n(e,"silde next-to"),setTimeout(function(){a()},500)},t.prototype.selectDate=function(e,t,a,s){var r=this;this.startJSON.prev[a]="m"==a?s-1:s,this.startJSON.now[a]=s,this.startJSON.next[a]="m"==a?s+1:s,this.appendList(this.startJSON,function(){r.addEvent()}),n(e,"active"),n(t,"active","remove"),m.show=!1,y.show=!1},t.prototype.changes=function(){var t=e.jQuery||e.$||null;t?t(this.focusObj)&&t(this.focusObj).change&&t(this.focusObj).change():this.focusObj.onchange&&this.focusObj.onchange()},e.addEventListener("load",function(){new t},!1),t});